{"ast":null,"code":"var _jsxFileName = \"/Users/ricardomerlin/coding-projects/HappyLibs/frontend/src/components/Posts.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Posts({\n  stories\n}) {\n  _s();\n  const [storyMemes, setStoryMemes] = useState([]);\n  const [likes, setLikes] = useState([]);\n  useEffect(() => {\n    const newStoryMemes = stories.map(() => memes[Math.floor(Math.random() * memes.length)]);\n    setStoryMemes(newStoryMemes);\n  }, [stories]);\n  const memes = ['https://www.lifewire.com/thmb/1NOvvEvy7NlIBLshEek1-N01kus=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GameofThronesmeme-a6b89f8bba5b4277ba655fb590a4179f.jpg', 'https://plaky.com/blog/wp-content/uploads/2023/03/Procrastination-meme.png', 'https://www.brosix.com/wp-content/uploads/6626fd2d23bf7634385dafe1926ad133.jpeg', 'https://www.dispatch.com/gcdn/authoring/2012/12/06/NCOD/ghows-OH-5c1778b2-5eb4-4f8e-b68b-685b73e52232-44d9ba3a.jpeg?width=1200&disable=upscale&format=pjpg&auto=webp', 'https://img.wattpad.com/34e1e69b161fb9e437a15d7dac08eca9723dc81e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f776174747061642d6d656469612d736572766963652f53746f7279496d6167652f7276637165597276647369796d773d3d2d3533343233393230332e313531323639616430336438363563373139323334313730353136312e6a7067?s=fit&w=720&h=720', 'https://www.lifewire.com/thmb/PiAB30sXKFcKSO_r72hP5-Hwq_E=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/BabywithFistmeme2-0c317ccc4d3a44c68098cd08f4ecac74.jpg', 'https://www.care.com/c/wp-content/uploads/sites/2/2021/04/maressab-202115020615567399.jpg.optimal.jpg', 'https://img.freepik.com/free-vector/simple-vibing-cat-square-meme_742173-4493.jpg?size=338&ext=jpg&ga=GA1.1.1488620777.1708646400&semt=ais', 'https://www.bu.edu/files/2021/12/Meme-One.jpg', 'https://www.rd.com/wp-content/uploads/2023/04/Hilarious-Cat-Memes-5.jpg?fit=700%2C700', 'https://www.mommyshorts.com/wp-content/uploads/2013/05/6a0133f30ae399970b0192aa1b4c77970d-800wi.jpg'];\n  useEffect(() => {\n    fetch('http://127.0.0.1:5555/likes').then(response => response.json()).then(data => {\n      const likesByStoryId = {};\n      data.forEach(like => {\n        if (!likesByStoryId[like.story_id]) {\n          likesByStoryId[like.story_id] = 0;\n        }\n        likesByStoryId[like.story_id]++;\n      });\n      setLikes(likesByStoryId);\n    });\n  }, []);\n  const mappedLikes = stories.map(() => 0);\n  function handleLike(e) {\n    e.preventDefault();\n    const storyId = stories[memeIndex].id;\n    fetch('http://127.0.0.1:5555/likes', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"story_id\": storyId\n      })\n    });\n  }\n  let memeIndex = 0;\n  const mappedStories = stories.flatMap((story, index) => {\n    const date = new Date(story.created_at);\n    const formattedDate = `${date.toLocaleString('default', {\n      month: 'long'\n    })} ${date.getDate()}, ${date.getFullYear()} at ${date.getHours() > 12 ? date.getHours() - 12 : date.getHours()}:${date.getMinutes() > 9 ? date.getMinutes() : '0' + date.getMinutes()} ${date.getHours() > 12 ? 'PM' : 'AM'}`;\n    function getRandomColor() {\n      const letters = '89ABCDEF';\n      let color = '#';\n      for (let i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 8)];\n      }\n      return color;\n    }\n    const backgroundColor = getRandomColor();\n    const storyCard = /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"individual-card\",\n      style: {\n        backgroundColor\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: story.content\n      }, story.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2B21\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Likes: \", likes[story.id] || 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Posted on \", formattedDate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"like-button\",\n        onClick: handleLike,\n        children: \"Like\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n    if (index % 4 === 3) {\n      const memeCard = /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"card individual-card text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: storyMemes[index],\n          alt: \"Meme\",\n          style: {\n            width: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this);\n      return [storyCard, memeCard];\n    } else {\n      return storyCard;\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts-container\",\n    children: mappedStories\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 9\n  }, this);\n}\n_s(Posts, \"uXeaWyDugdie9Z8Gg+HM7sMUdpc=\");\n_c = Posts;\nexport default Posts;\nvar _c;\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["useEffect","useState","jsxDEV","_jsxDEV","Posts","stories","_s","storyMemes","setStoryMemes","likes","setLikes","newStoryMemes","map","memes","Math","floor","random","length","fetch","then","response","json","data","likesByStoryId","forEach","like","story_id","mappedLikes","handleLike","e","preventDefault","storyId","memeIndex","id","method","headers","body","JSON","stringify","mappedStories","flatMap","story","index","date","Date","created_at","formattedDate","toLocaleString","month","getDate","getFullYear","getHours","getMinutes","getRandomColor","letters","color","i","backgroundColor","storyCard","class","style","children","content","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","memeCard","src","alt","width","_c","$RefreshReg$"],"sources":["/Users/ricardomerlin/coding-projects/HappyLibs/frontend/src/components/Posts.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nfunction Posts({ stories }) {\n\n    const [storyMemes, setStoryMemes] = useState([]);\n    const [likes, setLikes] = useState([]);\n\n    useEffect(() => {\n        const newStoryMemes = stories.map(() => memes[Math.floor(Math.random() * memes.length)]);\n        setStoryMemes(newStoryMemes);\n    }, [stories]);\n\n    const memes = [\n        'https://www.lifewire.com/thmb/1NOvvEvy7NlIBLshEek1-N01kus=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GameofThronesmeme-a6b89f8bba5b4277ba655fb590a4179f.jpg',\n        'https://plaky.com/blog/wp-content/uploads/2023/03/Procrastination-meme.png',\n        'https://www.brosix.com/wp-content/uploads/6626fd2d23bf7634385dafe1926ad133.jpeg',\n        'https://www.dispatch.com/gcdn/authoring/2012/12/06/NCOD/ghows-OH-5c1778b2-5eb4-4f8e-b68b-685b73e52232-44d9ba3a.jpeg?width=1200&disable=upscale&format=pjpg&auto=webp',\n        'https://img.wattpad.com/34e1e69b161fb9e437a15d7dac08eca9723dc81e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f776174747061642d6d656469612d736572766963652f53746f7279496d6167652f7276637165597276647369796d773d3d2d3533343233393230332e313531323639616430336438363563373139323334313730353136312e6a7067?s=fit&w=720&h=720',\n        'https://www.lifewire.com/thmb/PiAB30sXKFcKSO_r72hP5-Hwq_E=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/BabywithFistmeme2-0c317ccc4d3a44c68098cd08f4ecac74.jpg',\n        'https://www.care.com/c/wp-content/uploads/sites/2/2021/04/maressab-202115020615567399.jpg.optimal.jpg',\n        'https://img.freepik.com/free-vector/simple-vibing-cat-square-meme_742173-4493.jpg?size=338&ext=jpg&ga=GA1.1.1488620777.1708646400&semt=ais',\n        'https://www.bu.edu/files/2021/12/Meme-One.jpg',\n        'https://www.rd.com/wp-content/uploads/2023/04/Hilarious-Cat-Memes-5.jpg?fit=700%2C700',\n        'https://www.mommyshorts.com/wp-content/uploads/2013/05/6a0133f30ae399970b0192aa1b4c77970d-800wi.jpg'\n    ];\n\n    useEffect(() => {\n        fetch('http://127.0.0.1:5555/likes')\n        .then(response => response.json())\n        .then(data => {\n            const likesByStoryId = {};\n            data.forEach(like => {\n                if (!likesByStoryId[like.story_id]) {\n                    likesByStoryId[like.story_id] = 0;\n                }\n                likesByStoryId[like.story_id]++;\n            });\n            setLikes(likesByStoryId);\n        })\n    }, [])\n\n    const mappedLikes = stories.map(() => 0);\n\n    function handleLike(e) {\n        e.preventDefault();\n        const storyId = stories[memeIndex].id;\n        fetch('http://127.0.0.1:5555/likes', {\n            \n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"story_id\": storyId\n            })\n        })}\n\n    let memeIndex = 0;\n\n\n    const mappedStories = stories.flatMap((story, index) => {\n\n        const date = new Date(story.created_at);\n\n        const formattedDate = `${date.toLocaleString('default', { month: 'long' })} ${date.getDate()}, ${date.getFullYear()} at ${(date.getHours() > 12) ? date.getHours() - 12 : date.getHours()}:${(date.getMinutes() > 9 ? date.getMinutes() : '0' + date.getMinutes())} ${(date.getHours() > 12) ? 'PM' : 'AM'}`;\n\n        function getRandomColor() {\n            const letters = '89ABCDEF';\n            let color = '#';\n            for (let i = 0; i < 6; i++) {\n              color += letters[Math.floor(Math.random() * 8)];\n            }\n            return color;\n        }\n\n        const backgroundColor = getRandomColor();\n\n        const storyCard = (\n            <div class='individual-card' style={{ backgroundColor }}>                \n                <p key={story.id}>{story.content}</p>\n                <p>⬡</p>\n                <p>Likes: {likes[story.id] || 0}</p>\n                <p>Posted on {formattedDate}</p>\n                <button className=\"like-button\" onClick={handleLike}>Like</button>\n            </div>\n        );\n\n        if (index % 4 === 3) {\n            const memeCard = (\n                <div class='card individual-card text-center'>\n                <img src={storyMemes[index]} alt=\"Meme\" style={{width:'100%'}}/>\n                </div>\n            );\n            return [storyCard, memeCard];\n        } else {\n            return storyCard;\n        }\n    })\n\n    return (\n        <div className=\"posts-container\">\n            {mappedStories}\n        </div>\n    );\n}\n\nexport default Posts;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}